<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <title>Cart Fooder</title>
    <style>
        @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css');
  
      </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark mt-3 my-3" id="navbar">   
    </nav>

    <section id="cart" class="container">  
        <div class="row text-light table table-responsive">
            <table id="table" class="table-bordered" style="border:1px solid black">
                <tr>
                    <th>Nr.</th>
                    <th>Product</th>
                    <th>Price per QTY</th>
                    <th>QTY</th>
                    <th>Total</th>
                    <hr>
                </tr>
                
            </table>
        </div>
        <div class="row text-light text-end">
            <h5 id="cart-total"></h5>
        </div>
        <div class="row d-flex flex-row justify-content-end">
            <button class="btn btn-sm btn-primary m-2" id="checkout">Check Out</button> 
            <button class="btn btn-sm btn-primary m-2" id="emptyCart">Empty Cart</button> 
        </div>
    </section>
   
    <footer class="bg-dark" id="footer">
    </footer>

    <div class="row text-light m-3">
      <h6 class="fs-6 d-flex justify-content-center">Â© 2023 FOODER. All Right Reserved.</h6>
    </div>  

</body>
        <script src="./assets/js/bootstrap.bundle.min.js"></script>
        <script type="module">
          
                import {getNavbar,getFooter} from './modules/mainElements.js'
                    

                getNavbar('navbar')
                getFooter('footer')
                
                let t = localStorage.getItem('hasUser')
                if(t === 'skaUser'){
                    alert('You need to log in to advance!')
                    window.location = '/login.html'
                }else{
                    getCart('table')
                }
                               
                const empty = document.querySelector('#emptyCart')
                empty.addEventListener('click', event => {
                    event.preventDefault()
                    if(document.getElementById('table').rows.length === 1 ){
                        alert('Your cart is empty!')
                    }else{
                        emptyCart()
                    }            
                })

                const cout = document.querySelector('#checkout')
                cout.addEventListener('click', event => {
                    event.preventDefault() 
                    if(document.getElementById('table').rows.length === 1 ){
                        alert('Your cart is empty!')
                    }else{
                        checkout()
                    }
                })

                const form = document.querySelector('#sign-out')
                    form.addEventListener('click', event => {
                    event.preventDefault()
                    signOut()
                })

                const parent = document.querySelector("#table");
                parent.addEventListener("click", function(event) {
                            var buttonValue = event.target.getAttribute("value");
                            if(event.target && event.target.id === "deleteProductFromCart") {
                            
                                deleteProductFromCart(buttonValue)
                            }
                });
            </script>
            <script type="text/javascript" src="./modules/user.js">  </script>
            <script type="text/javascript" src="./modules/cart.js">  </script>

</html>